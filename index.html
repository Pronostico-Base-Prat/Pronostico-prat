<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clima Base Arturo Prat</title>
    <style>
        body { font-family: sans-serif; background: #e3effb; margin: 0; padding: 0; }
        header { background: #003366; color: white; text-align: center; padding: 25px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .seccion-dia { width: 100%; text-align: center; margin-top: 30px; }
        .etiqueta-dia { background: #3498db; color: white; padding: 10px 30px; border-radius: 50px; font-weight: bold; font-size: 1.2rem; display: inline-block; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .contenedor-clima { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
            gap: 20px; 
            padding: 20px 30px 40px 30px; 
            max-width: 1400px; 
            margin: 0 auto; 
        }
        .tarjeta { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); border-top: 10px solid #003366; }
        h2 { margin: 0; color: #003366; border-bottom: 1px solid #eee; padding-bottom: 10px; text-align: center; }
        .dato { margin: 10px 0; color: #333; font-size: 0.9rem; }
        .temp { font-size: 1.1rem; color: #d35400; font-weight: bold; }
    </style>
</head>
<body>
    <header>
        <h1>Base Naval Ant√°rtica "Capit√°n Arturo Prat"</h1>
        <p>Pron√≥stico Meteorol√≥gico - Puerto Soberan√≠a</p>
    </header>

    <div id="contenido-principal">
        <p style="text-align:center; padding:50px;">Cargando datos del clima...</p>
    </div>

    <script>
        const enlaceCSV = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQRxJhBvpk3JZu0MWpKPZ2PMi2DYfEjxhSTWMbX4i_EHHI6rh9frJuskRuaX-OXJqc_Akz6Dh5qLr72/pub?output=csv";

        async function cargarDatos() {
            try {
                const respuesta = await fetch(enlaceCSV);
                const texto = await respuesta.text();
                const filas = texto.split('\n').map(f => f.split(',')).slice(1); 
                const main = document.getElementById('contenido-principal');
                main.innerHTML = ""; 

                let diaActual = "";
                let contenedorActual = null;

                filas.forEach(col => {
                    if(col.length < 3 || !col[0]) return; 

                    // Si el d√≠a cambia, creamos un nuevo t√≠tulo y un nuevo contenedor
                    if (col[0] !== diaActual) {
                        diaActual = col[0];
                        
                        const seccion = document.createElement('div');
                        seccion.className = 'seccion-dia';
                        seccion.innerHTML = <div class="etiqueta-dia">${diaActual}</div>;
                        main.appendChild(seccion);

                        contenedorActual = document.createElement('div');
                        contenedorActual.className = 'contenedor-clima';
                        main.appendChild(contenedorActual);
                    }

                    // Agregamos la tarjeta al contenedor del d√≠a correspondiente
                    contenedorActual.innerHTML += `
                        <div class="tarjeta">
                            <h2>${col[1] || 'Horario'}</h2>
                            <p class="dato"><strong>‚òÅÔ∏è Cielo:</strong> ${col[2] || 'N/A'}</p>
                            <p class="dato"><strong>üëÅÔ∏è Vis:</strong> ${col[3] || 'N/A'}</p>
                            <p class="dato"><strong>üå¨Ô∏è Viento:</strong> ${col[4] || 'N/A'}</p>
                            <p class="dato"><strong>üåä Mar:</strong> ${col[5] || 'N/A'}</p>
                            <p class="temp">üå°Ô∏è Aire: ${col[6] || 'N/A'}</p>
                            <p style="color:#0077be" class="dato"><strong>‚ùÑÔ∏è S. T√©rmica:</strong> ${col[7] || 'N/A'}</p>
                        </div>
                    `;
                });
            } catch (e) {
                console.error("Error cargando datos:", e);
            }
        }
        cargarDatos();
    </script>
</body>
</html>
